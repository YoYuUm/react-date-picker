'use strict'

var ExtractTextPlugin = require('extract-text-webpack-plugin')
var path = require('path')
var fileExists = require('file-exists')

var extractLoaders = require('./extractLoaders')

/**
 * @param  {String} file File name - should be located in the ./style folder and have a scss extension
 *
 * @param  {Object} config
 * @param  {Object} config.loaders
 * @return {Object} webpack configuration
 */
module.exports = function(file, config){

  config = config || {}

  var filePath = './style/' + file + '.scss'

  var entry = {
    index: fileExists(filePath)? filePath: file
  };

  return {
    entry: entry,
    output: {
      path: path.resolve('./'),
      filename: file + '.css'
    },
    module: {
      loaders: config.loaders || extractLoaders
    },
    plugins: [
      new ExtractTextPlugin(file + '.css')
    ]
  }
}
